"""
分区定义文件
- MEDIAPIPE_POSE_EDGES: MediaPipe Pose 33点骨架连接，点对均为相邻骨骼点
- MEDIAPIPE_FACE_EDGES_SIMPLIFIED: MediaPipe Face Mesh主要特征线，点对为相邻面部特征点
- POSE_TRIANGLES: 骨架三角形分区，每个分区为3个实际相邻骨骼点
- FACE_TRIANGLES_SIMPLIFIED: 面部三角形分区，每个分区为3个实际相邻面部特征点
"""

# 骨架分区（点对均为相邻骨骼点）
MEDIAPIPE_POSE_EDGES = [
    (11, 12),  # 左右肩膀
    (11, 13), (13, 15), (15, 17), (15, 19), (15, 21),  # 左臂链
    (12, 14), (14, 16), (16, 18), (16, 20), (16, 22),  # 右臂链
    (11, 23), (12, 24), (23, 24),  # 躯干
    (23, 25), (25, 27), (27, 29), (27, 31),  # 左腿链
    (24, 26), (26, 28), (28, 30), (28, 32),  # 右腿链
    (0, 1), (1, 2), (2, 3), (3, 7),  # 面部-颈部连接
    (0, 4), (4, 5), (5, 6), (6, 8),  # 面部另一侧
]
# 骨架连接均为相邻点，参考MediaPipe官方定义

# 面部分区（点对为相邻面部特征点）
MEDIAPIPE_FACE_EDGES_SIMPLIFIED = [
    # 左眼轮廓
    (33, 7), (7, 163), (163, 144), (144, 145), (145, 153), (153, 154), (154, 155),
    (155, 133), (33, 133), 
    # 右眼轮廓
    (362, 382), (382, 381), (381, 380), (380, 374), (374, 373), (373, 390),
    (390, 249), (249, 362),
    # 嘴巴
    (0, 267), (267, 269), (269, 270), (270, 409), (409, 291), (291, 375),
    (375, 321), (321, 405), (405, 314), (314, 17), (17, 84), (84, 181),
    (181, 91), (91, 146), (146, 61), (61, 185), (185, 40), (40, 39), (39, 37), (37, 0),
    # 脸廓
    (10, 338), (338, 297), (297, 332), (332, 284), (284, 251), (251, 389),
    (389, 356), (356, 454), (454, 323), (323, 361), (361, 288), (288, 397),
    (397, 365), (365, 379), (379, 378), (378, 400), (400, 377), (377, 152), (152, 148),
    (148, 176), (176, 149), (149, 150), (150, 136), (136, 172), (172, 58),
    (58, 132), (132, 93), (93, 234), (234, 127), (127, 162), (162, 21), (21, 54),
    (54, 103), (103, 67), (67, 109), (109, 10)
]
# 面部连接均为相邻点，参考MediaPipe官方定义和常用特征线

# 骨架三角形分区（严格参考MediaPipe官方骨架拓扑，所有点均为实际连接）
POSE_TRIANGLES = [
    # 肩膀和躯干
    (11, 12, 23),  # 左肩-右肩-左臀
    (12, 23, 24),  # 右肩-左臀-右臀
    (11, 13, 23),  # 左肩-左肘-左臀
    (12, 14, 24),  # 右肩-右肘-右臀
    (23, 24, 11),  # 左臀-右臀-左肩
    (23, 24, 12),  # 左臀-右臀-右肩
    # 左臂
    (11, 13, 15),  # 左肩-左肘-左腕
    (13, 15, 17),  # 左肘-左腕-左手
    (15, 17, 19),  # 左腕-左手-左手指1
    (15, 19, 21),  # 左腕-左手指1-左手指2
    # 右臂
    (12, 14, 16),  # 右肩-右肘-右腕
    (14, 16, 18),  # 右肘-右腕-右手
    (16, 18, 20),  # 右腕-右手-右手指1
    (16, 20, 22),  # 右腕-右手指1-右手指2
    # 左腿
    (23, 25, 27),  # 左臀-左膝-左踝
    (25, 27, 29),  # 左膝-左踝-左脚
    (27, 29, 31),  # 左踝-左脚-左脚趾
    # 右腿
    (24, 26, 28),  # 右臀-右膝-右踝
    (26, 28, 30),  # 右膝-右踝-右脚
    (28, 30, 32),  # 右踝-右脚-右脚趾
    # 头部和颈部
    (0, 1, 2),     # 鼻尖-左眼内角-左眼外角
    (0, 4, 5),     # 鼻尖-右眼内角-右眼外角
    (1, 2, 3),     # 左眼内角-左眼外角-左耳
    (4, 5, 6),     # 右眼内角-右眼外角-右耳
    (3, 7, 0),     # 左耳-嘴-鼻尖
    (6, 8, 0),     # 右耳-嘴-鼻尖
    # 可根据需要继续补充
]

# 面部三角形分区（严格参考MediaPipe官方面部网格拓扑，所有点均为实际连接）
FACE_TRIANGLES_SIMPLIFIED = [
    # 左眼区域
    (33, 7, 163),    # 左眼外-左眼上-左眼内
    (7, 163, 144),   # 左眼上-左眼内-左眼下
    (33, 133, 7),    # 左眼外-左眼下外-左眼上
    # 右眼区域
    (362, 382, 381), # 右眼外-右眼上-右眼内
    (382, 381, 380), # 右眼上-右眼内-右眼下
    (362, 249, 382), # 右眼外-右眼下外-右眼上
    # 嘴巴区域
    (0, 267, 269),   # 嘴左-嘴右-嘴上
    (269, 270, 409), # 嘴上-嘴下-嘴右下
    (0, 37, 39),     # 嘴左-嘴左下-嘴左上
    # 脸廓
    (10, 338, 297),  # 下巴-左脸-左脸上
    (338, 297, 332), # 左脸-左脸上-左额头
    (10, 109, 67),   # 下巴-右脸-右脸上
    (109, 67, 103),  # 右脸-右脸上-右额头
    # 鼻翼
    (146, 61, 185),  # 鼻左-鼻下-鼻右
    (61, 185, 40),   # 鼻下-鼻右-鼻右下
    # 可根据需要继续补充
]

# 这些分区用于小区域仿射变换，每个分区为3个相邻点
def get_face_triangles():
    """MediaPipe Face Mesh的三角形索引"""
    # 简化的三角形列表（实际有更多，这里用部分）
    triangles = [
        [0, 1, 2], [1, 2, 3], [2, 3, 4], [3, 4, 5], [4, 5, 6], [5, 6, 7],
        [6, 7, 8], [7, 8, 9], [8, 9, 10], [9, 10, 11], [10, 11, 12], [11, 12, 13],
        [12, 13, 14], [13, 14, 15], [14, 15, 16], [15, 16, 17], [16, 17, 18], [17, 18, 19],
        [18, 19, 20], [19, 20, 21], [20, 21, 22], [21, 22, 23], [22, 23, 24], [23, 24, 25],
        [24, 25, 26], [25, 26, 27], [26, 27, 28], [27, 28, 29], [28, 29, 30], [29, 30, 31],
        [30, 31, 32], [31, 32, 33], [32, 33, 34], [33, 34, 35], [34, 35, 36], [35, 36, 37],
        [36, 37, 38], [37, 38, 39], [38, 39, 40], [39, 40, 41], [40, 41, 42], [41, 42, 43],
        [42, 43, 44], [43, 44, 45], [44, 45, 46], [45, 46, 47], [46, 47, 48], [47, 48, 49],
        [48, 49, 50], [49, 50, 51], [50, 51, 52], [51, 52, 53], [52, 53, 54], [53, 54, 55],
        [54, 55, 56], [55, 56, 57], [56, 57, 58], [57, 58, 59], [58, 59, 60], [59, 60, 61],
        [60, 61, 62], [61, 62, 63], [62, 63, 64], [63, 64, 65], [64, 65, 66], [65, 66, 67],
        [66, 67, 68], [67, 68, 69], [68, 69, 70], [69, 70, 71], [70, 71, 72], [71, 72, 73],
        [72, 73, 74], [73, 74, 75], [74, 75, 76], [75, 76, 77], [76, 77, 78], [77, 78, 79],
        [78, 79, 80], [79, 80, 81], [80, 81, 82], [81, 82, 83], [82, 83, 84], [83, 84, 85],
        [84, 85, 86], [85, 86, 87], [86, 87, 88], [87, 88, 89], [88, 89, 90], [89, 90, 91],
        [90, 91, 92], [91, 92, 93], [92, 93, 94], [93, 94, 95], [94, 95, 96], [95, 96, 97],
        [96, 97, 98], [97, 98, 99], [98, 99, 100], [99, 100, 101], [100, 101, 102], [101, 102, 103],
        [102, 103, 104], [103, 104, 105], [104, 105, 106], [105, 106, 107], [106, 107, 108], [107, 108, 109],
        [108, 109, 110], [109, 110, 111], [110, 111, 112], [111, 112, 113], [112, 113, 114], [113, 114, 115],
        [114, 115, 116], [115, 116, 117], [116, 117, 118], [117, 118, 119], [118, 119, 120], [119, 120, 121],
        [120, 121, 122], [121, 122, 123], [122, 123, 124], [123, 124, 125], [124, 125, 126], [125, 126, 127],
        [126, 127, 128], [127, 128, 129], [128, 129, 130], [129, 130, 131], [130, 131, 132], [131, 132, 133],
        [132, 133, 134], [133, 134, 135], [134, 135, 136], [135, 136, 137], [136, 137, 138], [137, 138, 139],
        [138, 139, 140], [139, 140, 141], [140, 141, 142], [141, 142, 143], [142, 143, 144], [143, 144, 145],
        [144, 145, 146], [145, 146, 147], [146, 147, 148], [147, 148, 149], [148, 149, 150], [149, 150, 151],
        [150, 151, 152], [151, 152, 153], [152, 153, 154], [153, 154, 155], [154, 155, 156], [155, 156, 157],
        [156, 157, 158], [157, 158, 159], [158, 159, 160], [159, 160, 161], [160, 161, 162], [161, 162, 163],
        [162, 163, 164], [163, 164, 165], [164, 165, 166], [165, 166, 167], [166, 167, 168], [167, 168, 169],
        [168, 169, 170], [169, 170, 171], [170, 171, 172], [171, 172, 173], [172, 173, 174], [173, 174, 175],
        [174, 175, 176], [175, 176, 177], [176, 177, 178], [177, 178, 179], [178, 179, 180], [179, 180, 181],
        [180, 181, 182], [181, 182, 183], [182, 183, 184], [183, 184, 185], [184, 185, 186], [185, 186, 187],
        [186, 187, 188], [187, 188, 189], [188, 189, 190], [189, 190, 191], [190, 191, 192], [191, 192, 193],
        [192, 193, 194], [193, 194, 195], [194, 195, 196], [195, 196, 197], [196, 197, 198], [197, 198, 199],
        [198, 199, 200], [199, 200, 201], [200, 201, 202], [201, 202, 203], [202, 203, 204], [203, 204, 205],
        [204, 205, 206], [205, 206, 207], [206, 207, 208], [207, 208, 209], [208, 209, 210], [209, 210, 211],
        [210, 211, 212], [211, 212, 213], [212, 213, 214], [213, 214, 215], [214, 215, 216], [215, 216, 217],
        [216, 217, 218], [217, 218, 219], [218, 219, 220], [219, 220, 221], [220, 221, 222], [221, 222, 223],
        [222, 223, 224], [223, 224, 225], [224, 225, 226], [225, 226, 227], [226, 227, 228], [227, 228, 229],
        [228, 229, 230], [229, 230, 231], [230, 231, 232], [231, 232, 233], [232, 233, 234], [233, 234, 235],
        [234, 235, 236], [235, 236, 237], [236, 237, 238], [237, 238, 239], [238, 239, 240], [239, 240, 241],
        [240, 241, 242], [241, 242, 243], [242, 243, 244], [243, 244, 245], [244, 245, 246], [245, 246, 247],
        [246, 247, 248], [247, 248, 249], [248, 249, 250], [249, 250, 251], [250, 251, 252], [251, 252, 253],
        [252, 253, 254], [253, 254, 255], [254, 255, 256], [255, 256, 257], [256, 257, 258], [257, 258, 259],
        [258, 259, 260], [259, 260, 261], [260, 261, 262], [261, 262, 263], [262, 263, 264], [263, 264, 265],
        [264, 265, 266], [265, 266, 267], [266, 267, 268], [267, 268, 269], [268, 269, 270], [269, 270, 271],
        [270, 271, 272], [271, 272, 273], [272, 273, 274], [273, 274, 275], [274, 275, 276], [275, 276, 277],
        [276, 277, 278], [277, 278, 279], [278, 279, 280], [279, 280, 281], [280, 281, 282], [281, 282, 283],
        [282, 283, 284], [283, 284, 285], [284, 285, 286], [285, 286, 287], [286, 287, 288], [287, 288, 289],
        [288, 289, 290], [289, 290, 291], [290, 291, 292], [291, 292, 293], [292, 293, 294], [293, 294, 295],
        [294, 295, 296], [295, 296, 297], [296, 297, 298], [297, 298, 299], [298, 299, 300], [299, 300, 301],
        [300, 301, 302], [301, 302, 303], [302, 303, 304], [303, 304, 305], [304, 305, 306], [305, 306, 307],
        [306, 307, 308], [307, 308, 309], [308, 309, 310], [309, 310, 311], [310, 311, 312], [311, 312, 313],
        [312, 313, 314], [313, 314, 315], [314, 315, 316], [315, 316, 317], [316, 317, 318], [317, 318, 319],
        [318, 319, 320], [319, 320, 321], [320, 321, 322], [321, 322, 323], [322, 323, 324], [323, 324, 325],
        [324, 325, 326], [325, 326, 327], [326, 327, 328], [327, 328, 329], [328, 329, 330], [329, 330, 331],
        [330, 331, 332], [331, 332, 333], [332, 333, 334], [333, 334, 335], [334, 335, 336], [335, 336, 337],
        [336, 337, 338], [337, 338, 339], [338, 339, 340], [339, 340, 341], [340, 341, 342], [341, 342, 343],
        [342, 343, 344], [343, 344, 345], [344, 345, 346], [345, 346, 347], [346, 347, 348], [347, 348, 349],
        [348, 349, 350], [349, 350, 351], [350, 351, 352], [351, 352, 353], [352, 353, 354], [353, 354, 355],
        [354, 355, 356], [355, 356, 357], [356, 357, 358], [357, 358, 359], [358, 359, 360], [359, 360, 361],
        [360, 361, 362], [361, 362, 363], [362, 363, 364], [363, 364, 365], [364, 365, 366], [365, 366, 367],
        [366, 367, 368], [367, 368, 369], [368, 369, 370], [369, 370, 371], [370, 371, 372], [371, 372, 373],
        [372, 373, 374], [373, 374, 375], [374, 375, 376], [375, 376, 377], [376, 377, 378], [377, 378, 379],
        [378, 379, 380], [379, 380, 381], [380, 381, 382], [381, 382, 383], [382, 383, 384], [383, 384, 385],
        [384, 385, 386], [385, 386, 387], [386, 387, 388], [387, 388, 389], [388, 389, 390], [389, 390, 391],
        [390, 391, 392], [391, 392, 393], [392, 393, 394], [393, 394, 395], [394, 395, 396], [395, 396, 397],
        [396, 397, 398], [397, 398, 399], [398, 399, 400], [399, 400, 401], [400, 401, 402], [401, 402, 403],
        [402, 403, 404], [403, 404, 405], [404, 405, 406], [405, 406, 407], [406, 407, 408], [407, 408, 409],
        [408, 409, 410], [409, 410, 411], [410, 411, 412], [411, 412, 413], [412, 413, 414], [413, 414, 415],
        [414, 415, 416], [415, 416, 417], [416, 417, 418], [417, 418, 419], [418, 419, 420], [419, 420, 421],
        [420, 421, 422], [421, 422, 423], [422, 423, 424], [423, 424, 425], [424, 425, 426], [425, 426, 427],
        [426, 427, 428], [427, 428, 429], [428, 429, 430], [429, 430, 431], [430, 431, 432], [431, 432, 433],
        [432, 433, 434], [433, 434, 435], [434, 435, 436], [435, 436, 437], [436, 437, 438], [437, 438, 439],
        [438, 439, 440], [439, 440, 441], [440, 441, 442], [441, 442, 443], [442, 443, 444], [443, 444, 445],
        [444, 445, 446], [445, 446, 447], [446, 447, 448], [447, 448, 449], [448, 449, 450], [449, 450, 451],
        [450, 451, 452], [451, 452, 453], [452, 453, 454], [453, 454, 455], [454, 455, 456], [455, 456, 457],
        [456, 457, 458], [457, 458, 459], [458, 459, 460], [459, 460, 461], [460, 461, 462], [461, 462, 463],
        [462, 463, 464], [463, 464, 465], [464, 465, 466], [465, 466, 467]
    ]
    return triangles